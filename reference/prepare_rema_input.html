<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="After the data is read into R (either manually from a .csv or other data file
or by using read_admb_re), this function prepares the data and
parameter settings for fit_rema. The model can be set up to run
in single survey mode with one or more strata, or in multi-survey mode, which
uses an additional relative abundance index (i.e. cpue) to inform predicted
biomass. The optional inputs described below related to the CPUE survey data
or scaling parameter q, such as cpue_dat and options_q
are only used when multi_survey = 1. The function structure and
documentation is modeled after
wham::prepare_wham_input."><title>Prepare input data and parameters for REMA model — prepare_rema_input • rema</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare input data and parameters for REMA model — prepare_rema_input"><meta property="og:description" content="After the data is read into R (either manually from a .csv or other data file
or by using read_admb_re), this function prepares the data and
parameter settings for fit_rema. The model can be set up to run
in single survey mode with one or more strata, or in multi-survey mode, which
uses an additional relative abundance index (i.e. cpue) to inform predicted
biomass. The optional inputs described below related to the CPUE survey data
or scaling parameter q, such as cpue_dat and options_q
are only used when multi_survey = 1. The function structure and
documentation is modeled after
wham::prepare_wham_input."><meta property="og:image" content="https://janesullivan-noaa.github.io/rema/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rema</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ex1_basics.html">REMA basics</a>
    <a class="dropdown-item" href="../articles/ex2_cpue.html">Fitting to an additional CPUE survey</a>
    <a class="dropdown-item" href="../articles/ex3_zeros.html">Strategies for handling zero biomass observations</a>
    <a class="dropdown-item" href="../articles/rema_equations.html">REMA model equations</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JaneSullivan-NOAA/rema/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare input data and parameters for REMA model</h1>
      <small class="dont-index">Source: <a href="https://github.com/JaneSullivan-NOAA/rema/blob/HEAD/R/prepare_rema_input.R" class="external-link"><code>R/prepare_rema_input.R</code></a></small>
      <div class="d-none name"><code>prepare_rema_input.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>After the data is read into R (either manually from a .csv or other data file
or by using <code><a href="read_admb_re.html">read_admb_re</a></code>), this function prepares the data and
parameter settings for <code><a href="fit_rema.html">fit_rema</a></code>. The model can be set up to run
in single survey mode with one or more strata, or in multi-survey mode, which
uses an additional relative abundance index (i.e. cpue) to inform predicted
biomass. The optional inputs described below related to the CPUE survey data
or scaling parameter <code>q</code>, such as <code>cpue_dat</code> and <code>options_q</code>
are only used when <code>multi_survey = 1</code>. The function structure and
documentation is modeled after
<a href="https://github.com/timjmiller/wham/blob/3a056359121bc1a911ed6a95c9203db4db456baa/R/prepare_wham_input.R" class="external-link">wham::prepare_wham_input</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_rema_input</span><span class="op">(</span></span>
<span>  model_name <span class="op">=</span> <span class="st">"REMA for unnamed stock"</span>,</span>
<span>  multi_survey <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  admb_re <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  biomass_dat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cpue_dat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sum_cpue_index <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  start_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wt_biomass <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wt_cpue <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  PE_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  q_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  zeros <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extra_biomass_cv <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extra_cpue_cv <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>model_name</dt>
<dd><p>name of stock or other identifier for REMA model</p></dd>


<dt>multi_survey</dt>
<dd><p>switch to run model in single or multi-survey mode. 0
(default) = single survey, 1 = multi-survey.</p></dd>


<dt>admb_re</dt>
<dd><p>list object returned from <code>read_admb_re.R</code>, which
includes biomass survey data (<code>admb_re$biomass_dat</code>), optional cpue
survey data (<code>admb_re$cpue_dat</code>), years for model predictions
(<code>admb_re$model_yrs</code>), and model predictions of log biomass by strata
in the correct format for input into REMA
(<code>admb_re$init_log_biomass_pred</code>). If supplied, the user does not need
enter biomass_dat or cpue_dat.</p></dd>


<dt>biomass_dat</dt>
<dd><p>data.frame of biomass survey data in long format with the
following columns:</p><dl><dt><code>strata</code></dt>
<dd><p>character; the survey name, survey region, management
unit, or depth strata. Note that the user must include this column even if
there is only one survey strata</p></dd>

<dt><code>year</code></dt>
<dd><p>integer; survey year. Note that the user only needs to
include years for which there are observations (i.e. there is no need to
supply <code>NULL</code> or <code>NA</code> values for missing survey years)</p></dd>

<dt><code>biomass</code></dt>
<dd><p>numeric; the biomass estimate/observation (e.g.
bottom trawl survey biomass in mt). By default, if <code>biomass == 0</code>,
this value will be treated as an NA (i.e., a failed survey). If the user
wants to make other assumptions about zeros (e.g. adding a small constant),
they must define it in the data manually.</p></dd>

<dt><code>cv</code></dt>
<dd><p>numeric; the coefficient of variation (CV) of the biomass
estimate (i.e. sd(biomass)/biomass)</p></dd>


</dl></dd>


<dt>cpue_dat</dt>
<dd><p>(optional) data.frame of relative abundance index (i.e. cpue) data in
long format with the following columns:</p><dl><dt><code>strata</code></dt>
<dd><p>character; the survey name, survey region, management
unit, or depth strata (note that the user must include this column even if
there is only one survey strata)</p></dd>

<dt><code>year</code></dt>
<dd><p>integer; survey year. Note that the user only needs to
include years for which there are observations (i.e. there is no need to
supply <code>NULL</code> or <code>NA</code> values for missing survey years)</p></dd>

<dt><code>cpue</code></dt>
<dd><p>numeric; the cpue estimate/observation (e.g. longline
survey cpue or relative population number); By default, if <code>cpue == 0</code>,
this value will be treated as an NA (i.e., a failed survey). If the user
wants to make other assumptions about zeros (e.g. adding a small constant),
they must define it in the data manually.</p></dd>

<dt><code>cv</code></dt>
<dd><p>numeric; the coefficient of variation (CV) of the cpue
estimate (i.e. sd(cpue)/cpue)</p></dd>


</dl></dd>


<dt>sum_cpue_index</dt>
<dd><p>T/F or 1/0, is the CPUE survey index able to be summed
across strata to get a total CPUE survey index? For example, Longline
survey relative population numbers (RPNs) are summable but longline survey
numbers per hachi (CPUE) are not. Default = <code>FALSE</code>.</p></dd>


<dt>start_year</dt>
<dd><p>(optional) integer value specifying the start year for
estimation in the model; if <code>admb_re</code> is supplied, this value defaults
to <code>start_year = min(admb_re$model_yrs)</code>; if <code>admb_re</code> is not
supplied, this value defaults to the first year in either
<code>biomass_dat</code> or <code>cpue_dat</code></p></dd>


<dt>end_year</dt>
<dd><p>(optional) integer value specifying the last year for
estimation in the model; if <code>admb_re</code> is supplied, this value defaults
to <code>end_year = max(admb_re$model_yrs)</code>; if <code>admb_re</code> is not
supplied, this value defaults to the last year in either <code>biomass_dat</code>
or <code>cpue_dat</code></p></dd>


<dt>wt_biomass</dt>
<dd><p>(optional) a multiplier on the biomass survey data
component of the negative log likelihood. For example, <code>nll =
wt_biomass * nll</code>. Defaults to <code>wt_biomass = 1</code></p></dd>


<dt>wt_cpue</dt>
<dd><p>(optional) a multiplier on the CPUE survey data
component of the negative log likelihood. For example, <code>nll =
wt_cpue * nll</code>. Defaults to <code>wt_cpue = 1</code></p></dd>


<dt>PE_options</dt>
<dd><p>(optional) customize implementation of process error (PE)
parameters, including options to share PE across biomass survey strata,
change starting values, fix parameters, and add penalties or priors (see
details)</p></dd>


<dt>q_options</dt>
<dd><p>(optional) customize implementation of scaling parameters
(q), including options to define q by biomass or cpue survey cpue strata,
change starting values, fix parameters, and add penalties or priors (see
details). only used when <code>multi_survey = 1</code></p></dd>


<dt>zeros</dt>
<dd><p>(optional) define assumptions about how to treat zero biomass or
CPUE observations, including treating zeros as NAs, changing the zeros to
small constants with fixed CVs, or modeling the zeros using a Tweedie
distribution (see details).</p></dd>


<dt>extra_biomass_cv</dt>
<dd><p>(optional) estimate additional observation error for
the biomass survey data (see details).</p></dd>


<dt>extra_cpue_cv</dt>
<dd><p>(optional) estimate additional observation error for
the CPUE survey data (see details).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>This function returns a named list with the following components:</p>
<p></p>
<dl><dt><code>data</code></dt>
<dd><p>Named list of data, passed to
  <code><a href="https://rdrr.io/pkg/TMB/man/MakeADFun.html" class="external-link">TMB::MakeADFun</a></code></p></dd>

  <dt><code>par</code></dt>
<dd><p>Named list of parameters, passed to
  <code><a href="https://rdrr.io/pkg/TMB/man/MakeADFun.html" class="external-link">TMB::MakeADFun</a></code></p></dd>

  <dt><code>map</code></dt>
<dd><p>Named list defining how to optionally collect and fix
  parameters, passed to <code><a href="https://rdrr.io/pkg/TMB/man/MakeADFun.html" class="external-link">TMB::MakeADFun</a></code></p></dd>

  <dt><code>random</code></dt>
<dd><p>Character vector of parameters to treat as random
  effects, passed to <code><a href="https://rdrr.io/pkg/TMB/man/MakeADFun.html" class="external-link">TMB::MakeADFun</a></code></p></dd>

  <dt><code>model_name</code></dt>
<dd><p>Name of stock or other identifier for REMA model</p></dd>

  <dt><code>biomass_dat</code></dt>
<dd><p>A tidied long format data.frame of the biomass
  survey observations and associated CVs by strata. This data.frame will be
  'complete' in that it will include all modeled years, with missing values
  treated as NAs. Note that this data.frame could differ from the
  <code>admb_re$biomass_dat</code> or input <code>biomass</code> if assumptions about
  zero biomass observations are different between the ADMB model and what the
  user specifies for REMA. The user can change their assumptions about zeros
  using the <code>zeros</code> argument.</p></dd>

  <dt><code>cpue_dat</code></dt>
<dd><p>If optional CPUE survey data are provided and
  <code>multi_survey = 1</code>, this will be a tidied long-format data.frame of
  the CPUE survey observations and associated CVs by strata. This data.frame
  will be 'complete' in that it will include all modeled years, with missing
  values treated as NAs. Note that this data.frame could differ from the
  <code>admb_re$biomass_dat</code> or input <code>biomass</code> if assumptions about
  zero CPUE observations are different between the ADMB model and what the
  user specifies for REMA. The user can change their assumptions about zeros
  using the <code>zeros</code> argument. If optional CPUE survey data are not
  provided or <code>multi_survey = 0</code>, this object will be <code>NULL</code>.</p></dd>

  
</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>PE_options</code> allows the user to specify options for process error (PE) parameters. If
<code>NULL</code>, default PE specifications are used: one PE parameter is
estimated for each biomass survey strata, initial values for <code>log_PE</code>
are set to 1, and no penalties or priors are added. The user can modify the
default <code>PE_options</code> using the following list of entries:</p><dl><dt>$pointer_PE_biomass</dt>
<dd><p>An index to customize the assignment of PE
    parameters to individual biomass strata. Vector with length = number of
    biomass strata, starting with an index of 1 and ending with the number of
    unique PE estimated. For example, if there are three biomass survey
    strata and the user wants to estimate only one PE, they would specify
    <code>pointer_PE_biomass = c(1, 1, 1)</code>. By default there is one unique
    log_PE estimated for each unique biomass survey stratum</p></dd>

    <dt>$initial_pars</dt>
<dd><p>A vector of initial values for log_PE. The
    default initial value for each log_PE is 1.</p></dd>

    <dt>$fix_pars</dt>
<dd><p>Option to fix PE parameters, where the user specifies
    the index value of the PE parameter they would like to fix at the initial
    value. For example, if there are three biomass survey strata, and the
    user wants to fix the <code>log_PE</code> for the second stratum but estimate
    the <code>log_PE</code> for the first and third strata they would specify
    <code>fix_pars = c(2)</code> Note that this option is not recommended.</p></dd>

    <dt>$penalty_options</dt>
<dd><p>Warning: the following options are experimental
    and not well-tested. Options for penalizing the PE likelihood or adding a
    prior on <code>log_PE</code> include the following:</p><dl><dt>"none"</dt>
<dd><p>(default) no penalty or prior used</p></dd>

        <dt>"wt"</dt>
<dd><p>a multiplier on the PE and random effects component of
        the negative log likelihood. For example, nll = wt * nll, where wt =
        1.5 is specified as a single value in the penalty_values argument</p></dd>

       <dt>"squared_penalty"</dt>
<dd><p>As implemented in an earlier version of the
       RE.tpl, this penalty prevents the PE from shrinking to zero. For
       example, <code>nll = nll + (log_PE + squared_penalty)^2</code>, where
       <code>squared_penalty = 1.5</code>. A vector of <code>squared_penalty</code>
       values is specified for each PE in the <code>penalty_values</code> argument</p></dd>

       <dt>"normal_prior"</dt>
<dd><p>Normal prior in log space, where <code>nll = nll -
       dnorm(log_PE, pmu_log_PE, psig_log_PE, 1)</code> and <code>pmu_log_PE</code> and
       <code>psig_log_PE</code> are specified for each PE parameter in the
       <code>penalty_values</code> argument</p></dd>

       
</dl><p></p></dd>

    <dt>penalty_values</dt>
<dd><p>user-defined values for the <code>penalty_options</code>.
    Each penalty type will is entered as follows:</p><dl><dt>"none"</dt>
<dd><p>(default) NULL For example, <code>penalty_values = NULL</code></p></dd>

        <dt>"wt"</dt>
<dd><p>a single numeric value. For example,
        <code>penalty_values = 1.5</code></p></dd>

        <dt>"squared_penalty"</dt>
<dd><p>a vector of numeric values with length =
        number of PE parameters. For example, if three PE
        parameters are being estimated and the user wants them to have the
        same penalty for each one, they would use <code>penalty_values =
        c(1.5, 1.5, 1.5)</code></p></dd>

        <dt>"normal_prior"</dt>
<dd><p>a vector of paired values for each PE
        parameter, where each vector pair is the prior mean of log_PE
        <code>pmu_log_PE</code> and the associated standard deviation
        <code>psig_log_PE</code>. For example, if three PE parameters are being
        estimated and the user wants them to have the same normal prior of
        log_PE ~ N(1.0, 0.08), <code>penalty_values = c(c(1.0, 0.08), c(1.0,
        0.08), c(1.0, 0.08))</code></p></dd>

        
</dl></dd>

</dl><p><code>q_options</code> allows the user to specify options for the CPUE survey
scaling parameters (q). If <code>multi_survey = 0</code> (default), no q parameters
are estimated regardless of what the user defines in <code>q_options</code>.
<code>multi_survey = 0</code> and <code>q_options = NULL</code>, default q specifications
are used: one q parameter is estimated for each CPUE survey strata, biomass
and CPUE surveys are assumed to share strata definitions (i.e.,
<code>biomass_dat</code> and <code>cpue_dat</code> have the same number of columns and
the columns represent the same strata), initial values for <code>log_q</code> are
set to 1, and no penalties or priors are added. The user can modify the
default <code>q_options</code> using the following list of entries:</p><dl><dt>$pointer_q_cpue</dt>
<dd><p>An index to customize the assignment of q
    parameters to individual CPUE survey strata. Vector with length = number
    of CPUE strata, starting with an index of 1 and ending with the number of
    unique q parameters estimated. For example, if there are three CPUE
    survey strata and the user wanted to estimate only one q, they would
    specify <code>pointer_q_cpue = c(1, 1, 1)</code>. The recommended model
    configuration is to estimate one log_q for each CPUE survey stratum.</p></dd>

    <dt>$pointer_biomass_cpue_strata</dt>
<dd><p>An index to customize the assignment
    of biomass predictions to individual CPUE survey strata. Vector with
    length = the number of biomass survey strata, starting with an index of 1
    and ending with the number of unique CPUE survey strata. This pointer
    only needs to be defined if the number of biomass and CPUE strata are not
    equal. The <code>pointer_biomass_cpue_strata</code> option allows the user to
    calculate predicted biomass at the CPUE survey strata level under the
    scenario where the biomass survey strata is at a higher resolution than
    the CPUE survey strata. For example, if there are 3 biomass survey strata
    that are represented by only 2 CPUE survey strata, the user may specify
    <code>pointer_biomass_cpue_strata = c(1, 1, 2)</code>. This specification would
    assign the first 2 biomass strata to the first CPUE strata, and the third
    biomass stratum to the second CPUE stratum. If there is no CPUE data to
    compliment a specific biomass stratum, the user can populate these with
    NAs. For example if pointer_biomass_cpue_strata = c(1, NA, 3), it means
    there is CPUE data for biomass strata 1 and 3 but not 2. NOTE: there
    cannot be a scenario where there are more CPUE survey strata than biomass
    survey strata because the CPUE survey is used to inform the biomass
    survey trend. An error will be thrown if
    <code>q_options$pointer_biomass_cpue_strata</code> is not defined and the
    biomass and CPUE survey strata definitions are not the same.</p></dd>

    <dt>$initial_pars</dt>
<dd><p>A vector of initial values for <code>log_q</code>. The
    default initial value for each log_q is 1.</p></dd>

    <dt>$fix_pars</dt>
<dd><p>Option to fix q parameters, where
    the user specifies the index value of the q parameter they would like to
    fix at the initial value. For example, if there are three CPUE survey
    strata, and the user wants to fix the <code>log_q</code> for the second
    stratum but estimate the <code>log_q</code> for the first and third strata
    they would specify <code>fix_pars = c(2)</code></p></dd>

    <dt>$penalty_options</dt>
<dd><p>Options for penalizing the q likelihood or adding
    a prior on <code>log_q</code> include the following:</p><dl><dt>"none"</dt>
<dd><p>(default) no penalty or prior used</p></dd>

        <dt>"normal_prior"</dt>
<dd><p>Warning, experimental and not well-tested.
        Normal prior in log space, where <code>nll = nll - dnorm(log_q,
        pmu_log_q, psig_log_q, 1)</code> and <code>pmu_log_q</code> and <code>psig_log_q</code>
        are specified for each q parameter in the <code>penalty_values</code>
        argument</p></dd>

       
</dl><p></p></dd>

    <dt>penalty_values</dt>
<dd><p>user-defined values for the <code>penalty_options</code>.
    Each penalty type will is entered as follows:</p><dl><dt>"none"</dt>
<dd><p>(default) NULL For example, <code>penalty_values =
        NULL</code></p></dd>

        <dt>"normal_prior"</dt>
<dd><p>a vector of paired values for each q parameter,
        where each vector pair is the prior mean of log_q <code>pmu_log_q</code>
        and the associated standard deviation <code>psig_log_q</code>. For example,
        if 2 q parameters are being estimated and the user wants them to have
        the same normal prior of log_q ~ N(1.0, 0.05), <code>penalty_values =
        c(c(1.0, 0.05), c(1.0, 0.05))</code></p></dd>

        
</dl></dd>

</dl><p><code>zeros</code> allows the user to specify options for how to treat zero biomass
or CPUE survey observations. By default zero observations are treated as NAs
and a warning msg to that effect is returned to the console. <code>zeros</code>
allows the user to specify non-default zero assumptions using the following
list of entries:</p><dl><dt>$assumption</dt>
<dd><p>character, name of assumption using. Only three
    alternatives are currently implemented, <code>zeros = list(assumption =
    c("NA", "small_constant", "tweedie")</code>. <code>"NA"</code> is the default; this
    option assumes the zero estimates are failed surveys and removes them.
    <code>"small_constant"</code> is an ad hoc method where a fixed value is added
    to the zero with an assumed CV. By default, the small constant = 0.0001
    and the CV is the value entered by the user in the data. The user can
    change the assumed value and CV using <code>options_small_constant</code>.
    <code>"tweedie"</code> uses the Tweedie as the assumed error distribution of
    the survey data, which allows zeros. This alternative estimates one
    additional power parameter. The assumed CV for zero biomass or zero cpue
    survey observations defaults to 1.5. The user can change this assumed CV,
    change initial values for the inverse logit transformed power parameter,
    or fix it at initial values using <code>options_tweedie</code>.</p></dd>

    <dt>$options_small_constant</dt>
<dd><p>a vector length of
    two numeric values. The first value is the small constant to add to the
    zero observation, the second is the user-defined coefficient for this
    value. The user can specify the small value but use the input CV by
    specifying an NA for the second value. E.g., 'options_small_constant =
    c(0.0001, NA)'.</p></dd>

    <dt>$options_tweedie</dt>
<dd><p>a list of entries to control initial or fixed
    values for Tweedie parameters. Currently, this argument accepts the
    following entries:</p></dd>

        
        
        
        
        
    
</dl><p><code>extra_biomass_cv</code> allows the user to specify options for estimating an
additional CV parameter ("tau" in the source code) for the biomass survey
observations. If <code>extra_biomass_cv = NULL</code> (default), no extra CV is
estimated. The user can modify the default <code>extra_biomass_cv</code> options
using the following list of entries:</p><dl><dt>$assumption</dt>
<dd><p>A string identifying what assumption is used for the
    biomass survey observations. Options include "none" (default in which no
    extra CV is estimated) or "extra_cv". If <code>extra_biomass_cv</code> is not
    NULL, user must define appropriate assumption.</p></dd>

    <dt>$pointer_extra_biomass_cv</dt>
<dd><p>An index to customize the assignment of
    extra CV parameters to individual biomass survey strata. Vector with
    length = number of biomass strata, starting with an index of 1 and ending
    with the number of unique extra CV parameters estimated. By default, if
    there are three biomass survey strata, the <code>pointer_extra_biomass_cv
    = c(1, 2, 3)</code>. If the user wanted to estimate only one extra CV, they
    would specify <code>pointer_extra_biomass_cv = c(1, 1, 1)</code>.</p></dd>

    <dt>$initial_pars</dt>
<dd><p>A vector of initial values for the extra biomass
    <code>logit_tau</code>. The default initial value for each logit_tau is
    -Inf (0 in real space).</p></dd>

    <dt>$fix_pars</dt>
<dd><p>Option to fix extra biomass CV parameters, where
    the user specifies the index value of the parameter they would like to
    fix at the initial value. For example, if there are three biomass survey
    strata, and the user wants to fix the <code>logit_tau</code> for the second
    stratum but estimate the <code>logit_tau</code> for the first and third strata
    they would specify <code>fix_pars = c(2)</code>.</p></dd>

    <dt>$upper_bound</dt>
<dd><p>A vector of user-specified values for the upper bound
    in real space of the estimated extra biomass CV, where the default
    upper bound is 1.5. For example, if there are three biomass survey
    strata, and the user wants to increase the upper bound of the extra
    biomass CV from 1.5 to 2, they would specify <code>upper_bound = c(2.0,
    2.0, 2.0)</code>.</p></dd>


</dl><p><code>extra_cpue_cv</code> allows the user to specify options for estimating an
additional CV parameter ("tau" in the source code) for the CPUE survey
observations. If <code>extra_cpue_cv = NULL</code> (default), no extra CV is
estimated. The user can modify the default <code>extra_cpue_cv</code> options
using the following list of entries:</p><dl><dt>$assumption</dt>
<dd><p>A string identifying what assumption is used for the
    CPUE survey observations. Options include "none" (default in which no
    extra CV is estimated) or "extra_cv".If <code>extra_cpue_cv</code> is not
    NULL, user must define appropriate assumption.</p></dd>

    <dt>$pointer_extra_cpue_cv</dt>
<dd><p>An index to customize the assignment of
    extra CV parameters to individual CPUE survey strata. Vector with
    length = number of CPUE strata, starting with an index of 1 and ending
    with the number of unique extra CV parameters estimated. By default, if
    there are three CPUE survey strata, the <code>pointer_extra_cpue_cv
    = c(1, 2, 3)</code>. If the user wanted to estimate only one extra CV, they
    would specify <code>pointer_extra_cpue_cv = c(1, 1, 1)</code>.</p></dd>

    <dt>$initial_pars</dt>
<dd><p>A vector of initial values for the extra cpue
    <code>logit_tau</code>. The default initial value for each logit_tau is
    -Inf (0 in real space).</p></dd>

    <dt>$fix_pars</dt>
<dd><p>Option to fix extra CPUE CV parameters, where
    the user specifies the index value of the parameter they would like to
    fix at the initial value. For example, if there are three CPUE survey
    strata, and the user wants to fix the <code>logit_tau</code> for the second
    stratum but estimate the <code>logit_tau</code> for the first and third strata
    they would specify <code>fix_pars = c(2)</code>.</p></dd>

    <dt>$upper_bound</dt>
<dd><p>A vector of user-specified values for the upper bound
    in real space of the estimated extra CPUE CV, where the default
    upper bound is 1.5. For example, if there are three CPUE survey
    strata, and the user wants to increase the upper bound of the extra
    cpue CV from 1.5 to 2, they would specify <code>upper_bound = c(2.0,
    2.0, 2.0)</code>.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># place holder for example code</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jane Sullivan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

